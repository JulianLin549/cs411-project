(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{120:function(e,t,a){},121:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),o=a(40),i=a.n(o),s=(a(120),a(121),a(19)),l=a(0),d=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Welcome to Budget Planning Platform!"})})},u=a(160),j=a(202),b=a(6),h=a.n(b),p=a(14),O=a(7),g=a(16),x=a.n(g),m=a(206),v=a(212),f=a(204);!function(e){e[e.BUDGET_OFFICER=1]="BUDGET_OFFICER",e[e.DEPARTMENT_HEAD=2]="DEPARTMENT_HEAD",e[e.COMMITTEE_MEMBER=3]="COMMITTEE_MEMBER"}(n||(n={}));var w=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),i=Object(O.a)(o,2),s=i[0],d=i[1],j=Object(r.useState)(""),b=Object(O.a)(j,2),g=b[0],w=b[1],S=Object(r.useState)(""),I=Object(O.a)(S,2),k=I[0],y=I[1],E=function(){var e=Object(p.a)(h.a.mark((function e(){var t,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s&&g&&k){e.next=3;break}return alert("input field cannot be empty"),e.abrupt("return");case 3:if(k in n){e.next=6;break}return alert("input not valid"),e.abrupt("return");case 6:return e.prev=6,t={userName:a,email:s,password:g,roleId:k},r=window.localStorage.getItem("user_id")||"",c=window.localStorage.getItem("access_token")||"",e.next=12,x.a.post("http://20.88.14.242:10061/user",t,{headers:{userId:r,accessToken:c}});case 12:alert("insert user: ".concat(a," success!")),window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),alert("Failed to add new user");case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(v.a,{m:2,children:[Object(l.jsx)(u.a,{variant:"h5",gutterBottom:!0,component:"div",children:"Insert"}),Object(l.jsxs)(v.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"User Name",style:{width:400},variant:"standard",onChange:function(e){c(e.target.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Email",variant:"standard",style:{width:400},onChange:function(e){d(e.target.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Password",variant:"standard",style:{width:400},type:"password",onChange:function(e){w(e.target.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"RoleId",variant:"standard",style:{width:400},onChange:function(e){y(e.target.value)}})}),Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(m.a,{variant:"outlined",onClick:E,children:"Submit"})})]})]})},S=a(215),I=a(219),k=a(218),y=a(214),E=a(216),N=a(217),C=a(213),B=a(210),_=a(201),T=a(220),A=a(221);function D(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(null),i=Object(O.a)(o,2),s=i[0],d=i[1],j=Object(r.useState)(!1),b=Object(O.a)(j,2),g=b[0],w=b[1],D=Object(r.useState)([]),M=Object(O.a)(D,2),F=M[0],U=M[1],V=Object(r.useState)(!1),R=Object(O.a)(V,2),Y=R[0],P=R[1],z=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!1),P(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.localStorage.getItem("user_id")||"",a=window.localStorage.getItem("access_token")||"",e.next=5,x.a.get("http://20.88.14.242:10061/user",{headers:{userId:t,accessToken:a}});case 5:n=e.sent,c(n.data.users),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("get data fail");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t),w(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t),P(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={userId:s},a=window.localStorage.getItem("user_id")||"",n=window.localStorage.getItem("access_token")||"",e.next=6,x.a.delete("http://20.88.14.242:10061/user",{data:t,headers:{userId:a,accessToken:n}});case 6:alert("delete user: ".concat(s," success!")),w(!1),P(!1),window.location.reload(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),w(!1),P(!1),alert("fail to add new earning source");case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=F)[0]&&t[1]&&t[2]&&t[3]&&t[4]){e.next=4;break}return alert("input cannot be empty"),e.abrupt("return");case 4:if(t[4]in n){e.next=7;break}return alert("roleId not valid"),e.abrupt("return");case 7:return e.prev=7,a={userId:t[0],userName:t[1],email:t[2],password:t[3],roleId:t[4]},r=window.localStorage.getItem("user_id")||"",c=window.localStorage.getItem("access_token")||"",e.next=13,x.a.put("http://20.88.14.242:10061/user",a,{headers:{userId:r,accessToken:c}});case 13:alert("update userId: ".concat(t[0]," success!")),w(!1),P(!1),window.location.reload(),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(7),w(!1),P(!1),alert("fail to update earning source");case 24:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=F)[1]=t.target.value,U(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=F)[2]=t.target.value,U(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=F)[3]=t.target.value,U(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=F)[4]=t.target.value,U(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(v.a,{m:2,children:[Object(l.jsx)(u.a,{variant:"h5",gutterBottom:!0,component:"div",children:"Users"}),Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{align:"right",children:"User Id"}),Object(l.jsx)(k.a,{align:"right",children:"User Name"}),Object(l.jsx)(k.a,{align:"right",children:"Email"}),Object(l.jsx)(k.a,{align:"right",children:"Role"}),Object(l.jsx)(k.a,{align:"right",children:"Edit Options"})]})}),Object(l.jsx)(I.a,{children:a.map((function(e){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{align:"right",children:e[0]}),Object(l.jsx)(k.a,{align:"right",children:e[1]}),Object(l.jsx)(k.a,{align:"right",children:e[2]}),Object(l.jsx)(k.a,{align:"right",children:e[4]}),Object(l.jsxs)(k.a,{align:"right",children:[Object(l.jsx)(m.a,{variant:"outlined",size:"small",onClick:function(){return q(e)},children:"update"}),Object(l.jsx)(m.a,{variant:"outlined",size:"small",color:"error",onClick:function(){return J(e[0])},children:"delete"})]})]},1)}))})]})}),Object(l.jsxs)(B.a,{open:g,onClose:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(l.jsx)(_.a,{id:"alert-dialog-title",children:"Are you sure you want to delete user ".concat(s," ?")}),Object(l.jsxs)(T.a,{children:[Object(l.jsx)(m.a,{onClick:H,variant:"outlined",autoFocus:!0,color:"error",children:"Yes"}),Object(l.jsx)(m.a,{onClick:z,variant:"contained",children:"No"})]})]}),Object(l.jsxs)(B.a,{open:Y,onClose:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(l.jsx)(_.a,{id:"alert-dialog-title",children:"Update user ".concat(F[0],".")}),Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{id:"standard-basic",label:"User Name",variant:"standard",style:{width:320},defaultValue:F[1],onChange:W}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Email",variant:"standard",style:{width:320},defaultValue:F[2],onChange:X}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Password",variant:"standard",style:{width:320},defaultValue:F[3],type:"password",onChange:K}),Object(l.jsx)(f.a,{id:"standard-basic",label:"RoleId",variant:"standard",style:{width:320},defaultValue:F[4],onChange:Q})]}),Object(l.jsxs)(T.a,{children:[Object(l.jsx)(m.a,{onClick:z,autoFocus:!0,color:"info",children:"Cancel"}),Object(l.jsx)(m.a,{onClick:G,variant:"contained",children:"Update"})]})]})]})}var M=Object(r.createContext)(void 0),F=function(e){var t=e.children,a=Object(r.useState)(null),n=Object(O.a)(a,2),c=n[0],o=n[1];Object(r.useEffect)((function(){i()}),[]);var i=function(){var e=window.localStorage.getItem("current_user");if(console.log("currentUser",e),null!=e&&"null"!==e&&"undefined"!==e){var t=JSON.parse(e);o(t)}else o(null)};return Object(l.jsx)(M.Provider,{value:{user:c,setUser:o},children:t})},U=function(){return Object(r.useContext)(M)},V=function(){var e=U().user;return console.log(e),Object(l.jsx)("div",{className:"m-3 align-middle",children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"h3",gutterBottom:!0,component:"div",children:"User Management"}),Object(l.jsx)("hr",{}),Object(l.jsx)(w,{}),Object(l.jsx)("hr",{}),Object(l.jsx)(D,{})]})})},R=a(211),Y=a(205),P=Object(Y.a)({input:{width:400,margin:"100px 10px"}});function z(){var e=P(),t=Object(r.useState)(""),a=Object(O.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(""),i=Object(O.a)(o,2),s=i[0],d=i[1],u=U().setUser,j=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={userId:n,password:s},e.next=4,x.a.post("http://20.88.14.242:10061/login",t);case 4:return a=e.sent,e.next=7,a.data;case 7:return r=e.sent,c={userId:r.userId,userName:r.userName,email:r.email,roleId:r.roleId,accessToken:r.accessToken},e.next=11,u(c);case 11:window.localStorage.setItem("current_user",JSON.stringify(c)),window.localStorage.setItem("access_token",c.accessToken),window.localStorage.setItem("user_id",c.userId),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("fail to login"),window.location.reload();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(R.a,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:Object(l.jsx)(R.a,{item:!0,xs:4,children:Object(l.jsxs)(v.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"on",children:[Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(f.a,{id:"standard-basic",label:"UserID",className:e.input,variant:"standard",onChange:function(e){c(e.target.value)}})}),Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Password",className:e.input,variant:"standard",type:"password",onChange:function(e){d(e.target.value)}})}),Object(l.jsx)(v.a,{m:4,children:Object(l.jsx)(m.a,{variant:"outlined",onClick:j,children:"Login"})})]})})})}var L=function(){var e=Object(s.g)();return U().user&&e.push("/"),Object(l.jsx)("div",{className:"m-3 align-middle",children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"h3",gutterBottom:!0,component:"div",children:"Login"}),Object(l.jsx)("hr",{}),Object(l.jsx)(z,{})]})})},J=["=",">","<",">=","<="];function q(e){Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var t=Object(r.useState)("="),a=Object(O.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)("="),i=Object(O.a)(o,2),s=i[0],d=i[1],j=Object(r.useState)(""),b=Object(O.a)(j,2),g=b[0],w=b[1],S=Object(r.useState)(""),I=Object(O.a)(S,2),k=I[0],y=I[1],E=Object(r.useState)(""),N=Object(O.a)(E,2),C=N[0],B=N[1],_=Object(r.useState)(""),T=Object(O.a)(_,2),A=T[0],D=T[1],M=Object(r.useState)(""),F=Object(O.a)(M,2),U=F[0],V=F[1],Y=Object(r.useState)(""),P=Object(O.a)(Y,2),z=P[0],L=P[1],q=function(){var t=Object(p.a)(h.a.mark((function t(){var a,r,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},""!==g&&(a.sourceName=g),""!==k&&(a.amount=n+k),""!==C&&(a.year=s+C),t.prev=4,r=window.localStorage.getItem("user_id")||"",c=window.localStorage.getItem("access_token")||"",t.next=9,x.a.get("http://20.88.14.242:10061/earning-source",{params:a,headers:{userId:r,accessToken:c}});case 9:o=t.sent,e.setEarningSource(o.data.data),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),alert("get data failed");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&U&&z){e.next=3;break}return alert("input field cannot be empty"),e.abrupt("return");case 3:return e.prev=3,t={sourceName:A,amount:U,year:z},a=window.localStorage.getItem("user_id")||"",n=window.localStorage.getItem("access_token")||"",e.next=9,x.a.post("http://20.88.14.242:10061/earning-source",t,{headers:{userId:a,accessToken:n}});case 9:alert("insert sourceName: ".concat(A,", amount: ").concat(U,", year:").concat(z," success!")),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),alert("fail to add new earning source");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(R.a,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[Object(l.jsxs)(R.a,{item:!0,xs:2,children:[Object(l.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Search"}),Object(l.jsxs)(v.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Earning Source",style:{width:400},variant:"standard",onChange:function(e){w(e.target.value)}})}),Object(l.jsxs)("div",{children:[Object(l.jsx)(f.a,{id:"standard-select-currency-native",select:!0,label:"Amount",value:n,onChange:function(e){c(e.target.value)},SelectProps:{native:!0},style:{width:60},variant:"standard",children:J.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Amount",variant:"standard",style:{width:320},onChange:function(e){y(e.target.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)(f.a,{id:"standard-select-currency-native",select:!0,label:"Year",value:s,onChange:function(e){d(e.target.value)},SelectProps:{native:!0},style:{width:60},variant:"standard",children:J.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Year",variant:"standard",style:{width:320},onChange:function(e){B(e.target.value)}})]}),Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(m.a,{variant:"outlined",onClick:q,children:"Submit"})})]})]}),Object(l.jsxs)(R.a,{item:!0,xs:2,children:[Object(l.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Insert"}),Object(l.jsxs)(v.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Earning Source",style:{width:400},variant:"standard",onChange:function(e){D(e.target.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Amount",variant:"standard",style:{width:400},onChange:function(e){V(e.target.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{id:"standard-basic",label:"Year",variant:"standard",style:{width:400},onChange:function(e){L(e.target.value)}})}),Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(m.a,{variant:"outlined",onClick:H,children:"Submit"})})]})]})]})}var H=Object(Y.a)({box:{margin:20,verticalAlign:"middle",height:300,overflowY:"scroll"}});function G(e){var t=H(),a=e.earningSource,n=Object(r.useState)([]),c=Object(O.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(null),d=Object(O.a)(s,2),u=d[0],j=d[1],b=Object(r.useState)(!1),g=Object(O.a)(b,2),w=g[0],D=g[1],M=Object(r.useState)(!1),F=Object(O.a)(M,2),U=F[0],V=F[1],R=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t),V(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t),D(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=o)[1]=t.target.value,i(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=o)[2]=t.target.value,i(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=o)[3]=t.target.value,i(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var t=Object(p.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={sourceId:u},n=window.localStorage.getItem("user_id")||"",r=window.localStorage.getItem("access_token")||"",t.next=6,x.a.delete("http://20.88.14.242:10061/earning-source",{data:a,headers:{userId:n,accessToken:r}});case 6:alert("delete sourceId: ".concat(u," success!")),D(!1),V(!1),e.setEarningSource(null),window.location.reload(),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),D(!1),V(!1),alert("fail to add new earning source");case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=Object(p.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o,t.prev=1,n={sourceId:a[0],amount:a[2],year:a[3]},console.log(n),r=window.localStorage.getItem("user_id")||"",c=window.localStorage.getItem("access_token")||"",t.next=8,x.a.put("http://20.88.14.242:10061/earning-source",n,{headers:{userId:r,accessToken:c}});case 8:alert("update sourceId: ".concat(a[0]," success!")),D(!1),V(!1),e.setEarningSource(null),window.location.reload(),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),D(!1),V(!1),alert("fail to update earning source");case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(){return t.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!1),V(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(v.a,{m:2,className:t.box,children:[Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"id"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"}),Object(l.jsx)(k.a,{align:"right",children:"Year"}),Object(l.jsx)(k.a,{align:"right",children:"Edit Options"})]})}),Object(l.jsx)(I.a,{children:a&&a.map((function(e){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:e[0]}),Object(l.jsx)(k.a,{align:"right",children:e[1]}),Object(l.jsx)(k.a,{align:"right",children:e[2]}),Object(l.jsx)(k.a,{align:"right",children:e[3]}),Object(l.jsxs)(k.a,{align:"right",children:[Object(l.jsx)(m.a,{variant:"outlined",size:"small",onClick:function(){return R(e)},children:"update"}),Object(l.jsx)(m.a,{variant:"outlined",size:"small",color:"error",onClick:function(){return Y(e[0])},children:"delete"})]})]},e[0])}))})]})}),Object(l.jsxs)(B.a,{open:w,onClose:G,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(l.jsx)(_.a,{id:"alert-dialog-title",children:"Are you sure you want to delete record ".concat(u," ?")}),Object(l.jsxs)(T.a,{children:[Object(l.jsx)(m.a,{onClick:J,autoFocus:!0,color:"error",children:"Yes"}),Object(l.jsx)(m.a,{onClick:G,variant:"contained",children:"No"})]})]}),Object(l.jsxs)(B.a,{open:U,onClose:G,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(l.jsx)(_.a,{id:"alert-dialog-title",children:"Update row ".concat(o[0],".")}),Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{id:"standard-basic",label:"Source Name",variant:"standard",style:{width:320},defaultValue:o[1],onChange:P}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Amount",variant:"standard",style:{width:320},defaultValue:o[2],onChange:z}),Object(l.jsx)(f.a,{id:"standard-basic",label:"Year",variant:"standard",style:{width:320},defaultValue:o[3],onChange:L})]}),Object(l.jsxs)(T.a,{children:[Object(l.jsx)(m.a,{onClick:G,autoFocus:!0,color:"info",children:"Cancel"}),Object(l.jsx)(m.a,{onClick:q,variant:"contained",children:"Yes"})]})]})]})}var W=function(e){var t=Object(r.useState)(null),a=Object(O.a)(t,2),n=a[0],c=a[1];return Object(l.jsx)("div",{className:"m-3 align-middle",children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"h3",gutterBottom:!0,component:"div",children:"Earning Source"}),Object(l.jsx)("hr",{}),Object(l.jsx)(q,{setEarningSource:c}),Object(l.jsx)("hr",{}),Object(l.jsx)(u.a,{variant:"h4",gutterBottom:!0,component:"div",children:"Result"}),Object(l.jsx)(G,{earningSource:n,setEarningSource:c})]})})},X=a(17),K=a(30),Q=["component","path"],Z=function(e){var t=e.component,a=e.path,r=Object(K.a)(e,Q),c=window.localStorage.getItem("current_user");console.log("currentUser",c);var o=null;return c&&(o=JSON.parse(c)),o&&o.roleId===n.DEPARTMENT_HEAD?Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(t,Object(X.a)({},e))}})):(alert("User must be Department Head to view this page!"),Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}})}})))},$=["component","path"],ee=function(e){var t=e.component,a=e.path,r=Object(K.a)(e,$),c=window.localStorage.getItem("current_user");console.log("currentUser",c);var o=null;return c&&(o=JSON.parse(c)),o&&o.roleId===n.COMMITTEE_MEMBER?Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(t,Object(X.a)({},e))}})):(alert("User must be Budget Committee Member to view this page!"),Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}})}})))},te=a(222),ae=a(223),ne=a(23),re=a(83),ce=Object(Y.a)((function(){return{navbar:{backgroundColor:"#1b87cf"},grow:{flexGrow:1},routerLink:{fontSize:"1.25rem",color:"white","&:hover":{color:"white"}},caption:{fontSize:"1px"}}}));function oe(){var e=ce(),t=U(),a=t.user,r=t.setUser,c=Object(s.g)(),o=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(null),e.next=3,Object(re.setCookie)(null,"accessToken","",{maxAge:-1,path:"/",secure:!0});case 3:return e.next=5,Object(re.setCookie)(null,"userId","",{maxAge:-1,path:"/",secure:!0});case 5:return window.localStorage.removeItem("current_user"),e.next=8,c.push("/login");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(te.a,{position:"static",children:Object(l.jsxs)(ae.a,{className:e.navbar,children:[Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(u.a,{variant:"h6",component:"div",children:"Budget Planner"})}),a&&a.roleId===n.DEPARTMENT_HEAD&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/user-management",children:"User Management"}),a&&a.roleId===n.BUDGET_OFFICER&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/budget-plans",children:"Budget Plans"}),a&&a.roleId===n.BUDGET_OFFICER&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/init-budget",children:"Init. Budget"}),a&&a.roleId===n.COMMITTEE_MEMBER&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/budget-voting",children:"Budget Voting"}),a&&a.roleId===n.DEPARTMENT_HEAD&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/budget-decision",children:"Budget Decision"}),a&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/earning-source",children:"Earning Source"}),Object(l.jsx)("div",{className:e.grow}),!a&&Object(l.jsx)(m.a,{color:"inherit",component:ne.b,className:e.routerLink,to:"/login",children:"Login"}),a&&Object(l.jsxs)(v.a,{m:2,children:[Object(l.jsx)(u.a,{variant:"body1",component:"div",children:"Hi, ".concat(a.userName," ")}),Object(l.jsx)(u.a,{variant:"caption",component:"div",className:e.caption,children:n[a.roleId]})]}),a&&Object(l.jsx)(m.a,{color:"inherit",onClick:o,children:"Logout"})]})})}var ie=["component","path"],se=function(e){var t=e.component,a=e.path,r=Object(K.a)(e,ie),c=window.localStorage.getItem("current_user");console.log("currentUser",c);var o=null;return c&&(o=JSON.parse(c)),o&&o.roleId===n.BUDGET_OFFICER?Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(t,Object(X.a)({},e))}})):(alert("User must be Budget Officer to view this page!"),Object(l.jsx)(s.b,Object(X.a)(Object(X.a)({path:a},r),{},{render:function(e){return Object(l.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}})}})))},le=Object(Y.a)({box:{margin:20,verticalAlign:"middle",height:300,overflowY:"scroll"},btn:{margin:10,float:"right"}}),de=function(e){var t=Object(s.g)(),a=U().user,n=le(),c=e.budgetSource,o=e.earningSource,i=Object(r.useState)(""),d=Object(O.a)(i,2),b=d[0],g=d[1],w=Object(r.useState)(""),B=Object(O.a)(w,2),_=B[0],T=B[1],A=Object(r.useState)(""),D=Object(O.a)(A,2),M=D[0],F=D[1],V=Object(r.useState)(""),R=Object(O.a)(V,2),Y=R[0],P=R[1],z=Object(r.useState)(0),L=Object(O.a)(z,2),J=L[0],q=L[1];Object(r.useEffect)((function(){}),[c]);var H=function(){var e=Object(p.a)(h.a.mark((function e(){var n,r,o,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],c.forEach((function(e){var t={sourceId:e[0],budgetSourceName:e[1],amount:e[2]};n.push(t),console.log(n)})),e.prev=2,r={sectorId:b,userId:null===a||void 0===a?void 0:a.userId,budgetName:_,startDate:M,endDate:Y,budgetSources:n},o=window.localStorage.getItem("user_id")||"",i=window.localStorage.getItem("access_token")||"",e.next=9,x.a.post("http://20.88.14.242:10061/budget_plan",r,{headers:{userId:o,accessToken:i}});case 9:return e.next=11,x.a.get("http://20.88.14.242:10061/budget_plan",{params:{userId:null===a||void 0===a?void 0:a.userId},headers:{userId:o,accessToken:i}});case 11:s=e.sent,console.log(s.data),t.push("/budget-plans"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),alert("Problem adding budget plan");case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),G=function(t){return function(a){var n=0,r=parseInt(a.target.value);o&&o[t]&&r>o[t][2]&&(a.target.value=o[t][2],r=o[t][2],alert("Budget amount cannot exceed earning source"));var i=JSON.parse(JSON.stringify(c));i.forEach((function(e){e[0]===t&&(e[2]=r),n+=e[2]})),q(n),e.setBudgetSource(i)}},W=function(t){return function(a){var n=c.filter((function(e){return e[0]!==t}));e.setBudgetSource(n);var r=0;n.forEach((function(e){r+=e[2]})),q(r)}};return Object(l.jsx)(j.a,{children:Object(l.jsxs)(v.a,{component:"form",sx:{"& .MuiTextField-root":{m:3,width:"30ch"}},noValidate:!0,autoComplete:"on",m:4,children:[Object(l.jsxs)(v.a,{m:2,children:[Object(l.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Initialize Budget"}),Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"SectorId",variant:"standard",onChange:function(e){g(e.target.value)}}),Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"Budget Name",variant:"standard",onChange:function(e){T(e.target.value)}}),Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"Start Date",placeholder:"11/27/2020",variant:"standard",onChange:function(e){F(e.target.value)}}),Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"End Date",placeholder:"11/27/2020",variant:"standard",onChange:function(e){P(e.target.value)}})]}),Object(l.jsxs)(v.a,{m:2,component:"form",sx:{"& .MuiTextField-root":{m:2,width:"30ch"}},children:[Object(l.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Budget Source"}),Object(l.jsx)(u.a,{variant:"caption",gutterBottom:!0,component:"div",children:"Click on Earning Source above to add budget source"}),Object(l.jsx)(j.a,{children:Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"From SourceId"}),Object(l.jsx)(k.a,{align:"right",children:"Budget Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"}),Object(l.jsx)(k.a,{align:"right",children:"Remove"})]})}),Object(l.jsx)(I.a,{children:c&&c.map((function(t){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:t[0]}),Object(l.jsx)(k.a,{align:"right",children:Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"Budget Source Name",variant:"standard",onChange:(a=t[0],function(t){var n=JSON.parse(JSON.stringify(c));n.forEach((function(e){e[0]===a&&(e[1]=t.target.value)})),e.setBudgetSource(n)})})}),Object(l.jsx)(k.a,{align:"right",children:Object(l.jsx)(f.a,{required:!0,id:"standard-required",label:"Amount",variant:"standard",onChange:G(t[0])})}),Object(l.jsx)(k.a,{align:"right",children:Object(l.jsx)(m.a,{variant:"outlined",size:"small",onClick:W(t[0]),children:"X"})})]},t[0]);var a}))})]})})})}),Object(l.jsx)(u.a,{variant:"body1",gutterBottom:!0,component:"div",children:"Total Amount:  ".concat(J)})]}),Object(l.jsx)(m.a,{variant:"outlined",onClick:H,size:"large",className:n.btn,children:"Add Budget"})]})})},ue=Object(Y.a)({box:{margin:20,verticalAlign:"middle",height:300,overflowY:"scroll"}}),je=function(e){var t=ue(),a=e.earningSource,n=e.setEarningSource;Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var c=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.localStorage.getItem("user_id")||"",a=window.localStorage.getItem("access_token")||"",e.next=6,x.a.get("http://20.88.14.242:10061/earning-source",{headers:{userId:t,accessToken:a}});case 6:r=e.sent,n(r.data.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("get data failed");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(j.a,{children:Object(l.jsx)(v.a,{m:2,className:t.box,children:Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"id"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"}),Object(l.jsx)(k.a,{align:"right",children:"Year"})]})}),Object(l.jsx)(I.a,{children:a&&a.map((function(t){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:(a=t[0],function(){var t=e.budgetSource.slice();if(-1===t.findIndex((function(e){return e[0]===a}))){var n=[a,"",""];t.push(n)}console.log(t),e.setBudgetSource(t)}),children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:t[0]}),Object(l.jsx)(k.a,{align:"right",children:t[1]}),Object(l.jsx)(k.a,{align:"right",children:t[2]}),Object(l.jsx)(k.a,{align:"right",children:t[3]})]},t[0]);var a}))})]})})})})},be=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),o=Object(O.a)(c,2),i=o[0],s=o[1];return Object(r.useEffect)((function(){n(a)}),[a]),Object(l.jsxs)("div",{children:[Object(l.jsx)(u.a,{variant:"h4",gutterBottom:!0,component:"div",children:"Initialize Budget Plan"}),Object(l.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Earning Source"}),Object(l.jsx)(je,{budgetSource:a,setBudgetSource:n,earningSource:i,setEarningSource:s}),Object(l.jsx)(de,{budgetSource:a,setBudgetSource:n,earningSource:i})]})},he=Object(Y.a)({box:{margin:20,verticalAlign:"middle",height:300,overflowY:"scroll"}}),pe=function(e){var t=e.data,a=e.data.data;console.log(a);var n=he();return Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Budget Name: ".concat(t.budgetName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Id: ".concat(t.sectorId)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Name: ".concat(t.sectorName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Start Date: ".concat(t.startDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"End Date: ".concat(t.endDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Status: ".concat(t.status)}),Object(l.jsx)(v.a,{m:2,className:n.box,children:Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"Budget Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Budget Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Year"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"})]})}),Object(l.jsx)(I.a,{children:a&&a.map((function(e){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.year}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.amount})]},e.budgetSourceId)}))})]})})})]})},Oe=Object(Y.a)((function(){return{routerLink:{fontSize:"1.25rem",color:"white","&:hover":{color:"white"}}}})),ge=function(){var e,t=Oe(),a=Object(r.useState)(null),n=Object(O.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(O.a)(i,2),d=s[0],j=s[1],b=window.localStorage.getItem("current_user");null!=b&&"null"!==b&&"undefined"!==b&&(e=JSON.parse(b)),Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var g=function(){var t=Object(p.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.localStorage.getItem("user_id")||"",r=window.localStorage.getItem("access_token")||"",t.next=5,x.a.get("http://20.88.14.242:10061"+"/budget_plan?userId=".concat(null===(a=e)||void 0===a?void 0:a.userId),{headers:{userId:n,accessToken:r}});case 5:c=t.sent,console.log(c.data),o(c.data),j(Object.keys(c.data));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u.a,{variant:"h4",gutterBottom:!0,component:"div",children:"Budget Plans from ".concat(e.userName)}),d&&d.map((function(e){return Object(l.jsx)(pe,{data:c[e]})})),Object(l.jsx)(m.a,{variant:"contained",component:ne.b,className:t.routerLink,to:"/init-budget",children:"Initiate Budget"})]})},xe=a(224),me=a(203),ve=Object(Y.a)({box:{margin:20,verticalAlign:"middle",maxHeight:300,overflowY:"scroll"},btnGroup:{margin:"5px 5px"}}),fe=function(e){var t=U().user,a=Object(r.useState)(""),n=Object(O.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(0),s=Object(O.a)(i,2),d=s[0],b=s[1],g=Object(r.useState)(0),w=Object(O.a)(g,2),B=w[0],_=w[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var T=function(){var t=Object(p.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=window.localStorage.getItem("user_id")||"",n=window.localStorage.getItem("access_token")||"",""===a||""===n){t.next=9;break}return t.next=5,x.a.get("http://20.88.14.242:10061/budget_plan/committee_response/count",{params:{budgetId:e.budgetId},headers:{userId:a,accessToken:n}});case 5:r=t.sent,console.log(r.data.acceptVotes,r.data.totalVotes),b(r.data.acceptVotes),_(r.data.totalVotes);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=e.data,D="Approved"===(null===A||void 0===A?void 0:A.status)||"Rejected"===(null===A||void 0===A?void 0:A.status),M=e.data.data,F=e.budgetId,V=function(){var e=Object(p.a)(h.a.mark((function e(a){var n,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={budgetId:F,userId:null===t||void 0===t?void 0:t.userId,decision:a,comment:c},console.log(n),r=window.localStorage.getItem("user_id")||"",o=window.localStorage.getItem("access_token")||"",e.next=6,x.a.post("http://20.88.14.242:10061/budget_plan/decision",n,{headers:{userId:r,accessToken:o}});case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=ve();return Object(l.jsx)(v.a,{mb:6,children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Budget Name: ".concat(A.budgetName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Id: ".concat(A.sectorId)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Name: ".concat(A.sectorName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Start Date: ".concat(A.startDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"End Date: ".concat(A.endDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Status: ".concat(A.status)}),Object(l.jsx)(v.a,{m:3,className:R.box,children:Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"Budget Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Budget Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Year"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"})]})}),Object(l.jsx)(I.a,{children:M&&M.map((function(e){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.year}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.amount})]},e.budgetSourceId)}))})]})})}),Object(l.jsx)(v.a,{m:3,children:B?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(xe.a,{now:d/B*100,label:"".concat(d/B*100,"%")}),Object(l.jsx)(v.a,{m:2,children:Object(l.jsx)("p",{children:"Accept Votes: ".concat(d," Total Votes: ").concat(B)})})]}):Object(l.jsx)(u.a,{variant:"h6",component:"div",children:"No Vote Yet"})}),D?Object(l.jsx)(u.a,{variant:"h6",component:"div",children:"Budget Has Been ".concat(null===A||void 0===A?void 0:A.status,"!")}):Object(l.jsxs)(me.a,{direction:"column",spacing:2,className:R.btnGroup,children:[Object(l.jsx)(f.a,{id:"budget-comment-input",label:"Comments for the Budget",margin:"normal",variant:"outlined",fullWidth:!0,multiline:!0,rows:5,onChange:function(e){o(e.target.value)}}),Object(l.jsx)(m.a,{variant:"contained",color:"success",size:"large",onClick:function(){return V(1)},children:"Accept Budget"}),Object(l.jsx)(m.a,{variant:"contained",color:"error",size:"large",onClick:function(){return V(0)},children:"Decline Budget"})]}),Object(l.jsx)("hr",{})]})})},we=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),o=Object(O.a)(c,2),i=o[0],s=o[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var d=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.localStorage.getItem("user_id")||"",a=window.localStorage.getItem("access_token")||"",""===t||""===a){e.next=9;break}return e.next=5,x.a.get("http://20.88.14.242:10061/budget_plan/decision",{headers:{userId:t,accessToken:a}});case 5:r=e.sent,console.log(r.data),n(r.data),s(Object.keys(r.data));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u.a,{variant:"h4",gutterBottom:!0,component:"div",children:"Budget Decision"}),i&&i.map((function(e){return Object(l.jsx)(fe,{data:a[e],budgetId:e})}))]})},Se=Object(Y.a)({box:{margin:20,verticalAlign:"middle",maxHeight:300,overflowY:"scroll"},btnGroup:{margin:"5px 5px"}}),Ie=function(e){var t=U().user,a=Object(r.useState)(""),n=Object(O.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(!1),s=Object(O.a)(i,2),d=s[0],b=s[1],g=Object(r.useState)(""),w=Object(O.a)(g,2),B=w[0],_=w[1],T=e.data,A="Approved"===(null===T||void 0===T?void 0:T.status)||"Rejected"===(null===T||void 0===T?void 0:T.status),D=e.data.data,M=e.budgetId;Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var F=function(){var a=Object(p.a)(h.a.mark((function a(){var n,r,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=window.localStorage.getItem("user_id")||"",r=window.localStorage.getItem("access_token")||"",a.next=6,x.a.get("http://20.88.14.242:10061/budget_plan/committee_response",{params:{userId:null===t||void 0===t?void 0:t.userId,budgetId:e.budgetId},headers:{userId:n,accessToken:r}});case 6:c=a.sent,"{}"!==JSON.stringify(c.data)&&(b(!0),_(c.data.comment)),console.log(c.data),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),alert("get data failed");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(h.a.mark((function e(a){var n,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={budgetId:M,userId:null===t||void 0===t?void 0:t.userId,vote:a,comment:c},r=window.localStorage.getItem("user_id")||"",o=window.localStorage.getItem("access_token")||"",console.log(n),e.next=6,x.a.post("http://20.88.14.242:10061/budget_plan/committee_response",n,{headers:{userId:r,accessToken:o}});case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Se();return Object(l.jsx)(v.a,{mb:6,children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Budget Name: ".concat(T.budgetName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Id: ".concat(T.sectorId)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Sector Name: ".concat(T.sectorName)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Start Date: ".concat(T.startDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"End Date: ".concat(T.endDate)}),Object(l.jsx)(u.a,{variant:"overline",component:"div",children:"Status: ".concat(T.status)}),Object(l.jsx)(v.a,{m:3,className:R.box,children:Object(l.jsx)(y.a,{component:C.a,children:Object(l.jsxs)(S.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(l.jsx)(E.a,{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(k.a,{children:"Budget Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Budget Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Id"}),Object(l.jsx)(k.a,{align:"right",children:"Earning Source Name"}),Object(l.jsx)(k.a,{align:"right",children:"Year"}),Object(l.jsx)(k.a,{align:"right",children:"Amount"})]})}),Object(l.jsx)(I.a,{children:D&&D.map((function(e){return Object(l.jsxs)(N.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.budgetSourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceId}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.sourceName}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.year}),Object(l.jsx)(k.a,{component:"th",scope:"row",children:e.amount})]},e.budgetSourceId)}))})]})})}),A?Object(l.jsx)(u.a,{variant:"h6",component:"div",children:"Budget Has Been ".concat(null===T||void 0===T?void 0:T.status,"!")}):Object(l.jsxs)(me.a,{direction:"column",spacing:2,className:R.btnGroup,children:[Object(l.jsx)(u.a,{variant:"h6",component:"div",hidden:!d,children:"You have voted"}),Object(l.jsx)(f.a,{id:"budget-comment-input",margin:"normal",variant:"outlined",fullWidth:!0,multiline:!0,defaultValue:B,disabled:d,rows:5,onChange:function(e){o(e.target.value)}}),Object(l.jsx)(m.a,{variant:"contained",color:"success",size:"large",onClick:function(){return V(1)},disabled:d,children:"Accept Budget"}),Object(l.jsx)(m.a,{variant:"contained",color:"error",size:"large",onClick:function(){return V(0)},disabled:d,children:"Decline Budget"})]}),Object(l.jsx)("hr",{})]})})},ke=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),o=Object(O.a)(c,2),i=o[0],s=o[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var d=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.localStorage.getItem("user_id")||"",a=window.localStorage.getItem("access_token")||"",e.next=6,x.a.get("http://20.88.14.242:10061/budget_plan/voting",{headers:{userId:t,accessToken:a}});case 6:r=e.sent,console.log(r.data),n(r.data),s(Object.keys(r.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("get data failed");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u.a,{variant:"h4",gutterBottom:!0,component:"div",children:"Budget Voting"}),i&&i.map((function(e){return Object(l.jsx)(Ie,{data:a[e],budgetId:e})}))]})};var ye=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(oe,{}),Object(l.jsx)(v.a,{mt:6,children:Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{exact:!0,path:"/",component:d}),Object(l.jsx)(s.b,{path:"/earning-source",children:Object(l.jsx)(W,{earningSourceForm:!0})}),Object(l.jsx)(s.b,{path:"/login",component:L}),Object(l.jsx)(se,{path:"/budget-plans",component:ge}),Object(l.jsx)(se,{path:"/init-budget",component:be}),Object(l.jsx)(ee,{path:"/budget-voting",component:ke}),Object(l.jsx)(Z,{path:"/user-management",component:V}),Object(l.jsx)(Z,{path:"/budget-decision",component:we})]})})]})},Ee=function(){var e=Object(s.h)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null};a(154);i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(F,{children:Object(l.jsxs)(ne.a,{children:[Object(l.jsx)(Ee,{}),Object(l.jsx)(ye,{})]})})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.94e78889.chunk.js.map